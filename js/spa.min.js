const links=document.querySelectorAll("nav a"),main=document.querySelector("main");function loadAndSwap(t,n=!0){fetch(t).then(t=>{if(!t.ok)throw new Error("Erro ao carregar pÃ¡gina: "+t.status);return t.text()}).then(a=>{const e=(new DOMParser).parseFromString(a,"text/html").querySelector("main");if(e){if(main.innerHTML=e.innerHTML,main.className=e.className||"",main.classList.contains("cadastro")&&setTimeout(()=>{window.initCadastroForm&&window.initCadastroForm()},50),window.initPage&&"function"==typeof window.initPage)try{window.initPage(main.className)}catch(t){console.error("Erro em initPage:",t)}n&&history.pushState({href:t},"",t)}}).catch(n=>{window.location.href=t})}links.forEach(t=>{t.addEventListener("click",n=>{const a=t.getAttribute("href");n.preventDefault(),loadAndSwap(a,!0)})}),window.addEventListener("popstate",t=>{loadAndSwap(t.state&&t.state.href||location.pathname,!1)}),document.addEventListener("DOMContentLoaded",()=>{if(main.classList.contains("cadastro")&&setTimeout(()=>{window.initCadastroForm&&window.initCadastroForm()},100),window.initPage)try{window.initPage(main.className)}catch(t){console.error("Erro em initPage no load inicial:",t)}});